#!/usr/bin/env python

from testify import *
from untwisted import event

@test
@event.connect
def callThenShift():
  expect(1)

  sample = event.sequence()
  sample('Call then shift')
  equal((yield sample.shift()), ('Call then shift',))

@event.connect
def shiftThenCall():
  expect(1)

  equal((yield event.sequence().shift()), ('Shift then call',))

test(lambda: shiftThenCall()('Shift then call'))
