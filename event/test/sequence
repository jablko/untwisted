#!/usr/bin/env python

import untwisted
from testify import *
from untwisted import event

@test
def callThenShift():
  expect(1)

  sample = event.sequence()('Call then shift')

  #@sample.shift().connect
  @untwisted.identity(sample.shift().connect)
  @untwisted.callback
  def ignore():
    equal((yield), 'Call then shift')

@test
def shiftThenCall():
  expect(1)

  sample = event.sequence()

  #@sample.shift().connect
  @untwisted.identity(sample.shift().connect)
  @untwisted.callback
  def ignore():
    equal((yield), 'Shift then call')

  sample('Shift then call')
